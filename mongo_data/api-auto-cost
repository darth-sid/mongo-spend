from flask import Flask, jsonify
import requests
from requests.auth import HTTPDigestAuth

app = Flask(__name__)

# Replace these with your actual values
PROJECT_ID = 'your_project_id'
CLUSTER_NAME = 'your_cluster_name'
PUBLIC_KEY = 'your_public_key'
PRIVATE_KEY = 'your_private_key'

@app.route('/cluster-size')
def get_cluster_size():
    try:
        current_size = get_current_cluster_size(PROJECT_ID, CLUSTER_NAME, PUBLIC_KEY, PRIVATE_KEY)
        return jsonify({"current_size": current_size})
    except Exception as e:
        return jsonify({"error": str(e)}), 500

@app.route('/savings/<proposed_size>')
def get_savings(proposed_size):
    try:
        savings = calculate_savings(PROJECT_ID, CLUSTER_NAME, PUBLIC_KEY, PRIVATE_KEY, proposed_size)
        return jsonify({"savings": savings})
    except Exception as e:
        return jsonify({"error": str(e)}), 500

if __name__ == '__main__':
    app.run(debug=True)

